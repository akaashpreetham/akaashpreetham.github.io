<!DOCTYPE html>
<html>
	<head>
		<title>JACKPOT</title>
		<link rel="stylesheet" href="Jackpot.css">
	</head>
	
	<body>

	 	<!-- Defining the elements-->
	
		<div class="Slot" id="A">
			<div class="N" id="NA">0</div>
		</div>
		<div class="Slot" id="B">
			<div class="N" id="NB">0</div>
		</div>
		<div class="Slot" id="C">
			<div class="N" id="NC">0</div>
		</div>
		<div>
			<button id="Btn">SPIN</button>
		</div>
		<h1 id="Title">JACKPOT</h1>
		<h1 id="Msg" style="color: white;"></h1>
		<h2>Click on the Spider to go back</h2>
		<h1 id="Score">Score: 000</h1>
		<audio src="Cha Ching Cash Register Sound Effect-[AudioTrimmer.com].mp3" id="CC"></audio>
		<audio src="Applause.mp3" id="Applause"></audio>

		<!-- Defining the functions-->

		<script type="text/javascript">
			var begin=prompt("Enter a 3 digit number to start your spin with: ","000");
			document.getElementById("NA").innerHTML=Math.floor(begin/100);
			document.getElementById("NB").innerHTML=Math.floor(begin/10)%10;
			document.getElementById("NC").innerHTML=begin%10;
			var bn=document.querySelector('button');
			var aud1=document.getElementById("CC");
			var aud2=document.getElementById("Applause");
			var flag=0;
			var score=0;
			var i=0;
			var arr=new Array(1,2,3);
			var elemA = document.getElementById("NA");
			var elemB = document.getElementById("NB");
			var elemC = document.getElementById("NC");
			bn.addEventListener("click",function(){
				aud1.play();
				generate(elemC);
				generate(elemB);
				generate(elemA);
				if(flag==1){
					restart();
				}
				check();
			});
				function generate(elem) {   
	  				var pos = 0;
	  				var a=elem.innerHTML;
	  				var n=Math.floor(Math.random()*10);
	  				arr[i]=n;
	  				i++;
	 				function roll() {
	   					if(a==n){
							pos++;
							if(pos<=20){
								requestAnimationFrame(roll);
							}
							elem.style.top=pos+"%";
							elem.innerHTML=a;
						}  
						else{
							pos++;
							if((pos*10)>=100){
								pos=0;
								if(a==9){
									a=0;
								}
								else{
									a++;
								}
							}
							elem.style.top=(pos*10)+"%";
							elem.innerHTML=a;
							requestAnimationFrame(roll);
						}
	  				}
	  			requestAnimationFrame(roll);
				}
				function check(){
					i=0;
					if(arr[0]==arr[1]&&arr[0]==arr[2]){
						document.getElementById("Msg").innerHTML="CONGRATULATIONS";
						document.getElementById("Btn").innerHTML="RESTART";
						score+=(arr[2]*100)+(arr[1]*10)+arr[0];
						document.getElementById("Score").innerHTML="Score: "+score;
						flag=1;
						aud2.play();
					}
				}
				function restart(){
						document.getElementById("Btn").innerHTML="SPIN";
						document.getElementById("Msg").innerHTML="";
						flag=0;
				}
		</script>
		<a href="index.html"><canvas></canvas></a>
		<script type="text/javascript">
				var a=document.querySelector("canvas");
				var s=a.getContext("2d");
				s.beginPath();
				s.moveTo(75,0);
				s.lineTo(45,30);
				s.lineTo(45,60);
				s.lineTo(75,90);
				s.lineTo(105,90);
				s.lineTo(135,60);
				s.lineTo(135,30);
				s.lineTo(105,0);
				s.lineTo(75,0);
				s.fillStyle="rgb(222,224,226)";
				s.fill();
				s.fillRect(80,90,20,10);
				s.beginPath();
				s.strokeStyle="rgb(222,224,226)";
				for(var y=31;y<=60;y+=14){
					s.moveTo(45,y);
					s.lineTo(25,y-20);
					s.lineTo(0,y);
				}
				for(var y=31;y<=60;y+=14){
					s.moveTo(135,y);
					s.lineTo(155,y-20);
					s.lineTo(180,y);
				}
				s.stroke();
		</script>
	</body>
</html>